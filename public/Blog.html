<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Blog Entries</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="header"> 
        <a href="#" id="home-link">Home</a>
        <span class="separator">|</span>
        <a href="conspire.html">Conspire</a>
        <span class="separator">|</span>
<div class="dropdown">
    <button class="dropdown-button"><a>Links</a></button>
    <div class="dropdown-content">
        <a href="https://www.linkedin.com/in/karan-gupta-50a298251/" style="background-color: #0077b5;">LinkedIn</a>
        <a href="https://www.github.com/karan10i" style="background-color: #333;">GitHub</a>
        <a href="https://philiphia.blogspot.com" style="background-color: #d6332a;">Old Blog</a>
        <a href="https://in.pinterest.com/karangup10/" style="background-color: #bd081c;">Pinterest</a>
        <a href="https://x.com/forwardwasit" style="background-color: #311010;">X</a>
    </div>
</div>
        <span class="separator">|</span>
        <a href="contact.html">Contact Us</a>
    </div>
    <div class="container">
        <div class="left-column">
            <div class="profile-photo">
                <img src="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=" alt="Profile">
            </div>
            <div class="links">
                <div class="link-item">
                    <a href="link1.html">Books</a>
                </div>
                <div class="link-item">
                    <a href="link2.html">Must Read</a>
                </div>
            </div>
        </div>
        <div id="blog-content" class="blog-content">
            <div id="blog-list" class="blog-list">
                <!-- Blog headings will be dynamically loaded here -->
            </div>
            <div id="blog-details" class="blog-details" style="display: none;">
                <!-- Blog content will be dynamically loaded here -->
            </div>
        </div>
    </div>

    <script>
        const blogList = document.getElementById('blog-list');
        const blogDetails = document.getElementById('blog-details');
        const homeLink = document.getElementById('home-link');
        const myDropdown = document.getElementById('myDropdown');
        if (myDropdown) {
            myDropdown.addEventListener('change', function () {
                const selectedLink = this.value;
                if (selectedLink) {
                    window.location.href = selectedLink; // Redirect to the selected link
                }
            });
        }
        // Fetch blog headings
        fetch('/getData')
            .then(response => response.json())
            .then(data => {
                blogList.innerHTML = '';
                data.reverse().forEach((entry) => {
                    const container = document.createElement('div');
                    container.className = 'blog-container';

                    const heading = document.createElement('h2');
                    heading.className = 'blog-heading';
                    heading.textContent = entry.Heading || 'No Title';
                    heading.addEventListener('click', () => {
                        showBlogContent(entry);
                    });

                    const preview = document.createElement('p');
                    preview.className = 'blog-preview';
                    preview.textContent = (entry.Text || '').split(' ').slice(0, 5).join(' ') + '...';

                    container.appendChild(heading);
                    container.appendChild(preview);
                    blogList.appendChild(container);
                });
            })
            .catch(err => {
                blogList.textContent = 'Error loading data.';
            });

        // Show blog content dynamically
        function showBlogContent(entry) {
            blogList.style.display = 'none';
            blogDetails.style.display = 'block';
            blogDetails.innerHTML = `
                <h2>${entry.Heading || 'No Title'}</h2>
                <p>${entry.Text || 'No Content'}</p>
            `;
        }

        // Return to blog headings when clicking Home
        homeLink.addEventListener('click', (e) => {
            e.preventDefault();
            blogList.style.display = 'block';
            blogDetails.style.display = 'none';
        });
   document.addEventListener('DOMContentLoaded', async () => {
  const img = document.querySelector('.profile-photo img');
  try {
    const res = await fetch('/getRandomImage?t=' + Date.now(), { cache: 'no-store' });
    console.log('GET /getRandomImage status', res.status);
    const data = await res.json();
    console.log('getRandomImage ->', data);
    if (!data || !data.image) throw new Error('no image returned');
    const path = data.image.startsWith('data:') ? data.image : (data.image.startsWith('/') ? data.image : '/' + data.image);
    img.onload = () => console.log('image loaded:', path, img.naturalWidth, img.naturalHeight);
    img.onerror = () => console.error('image failed to load:', path);
    img.src = path;
  } catch (err) {
    console.error('fetchRandomImage error:', err);
  }
}); </script>
</body>
</html>